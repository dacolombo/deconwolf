.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "DECONWOLF" "1" "2022" "dw 0.1.0" ""
.hy
.SH NAME
.PP
deconwolf \f[B]dw\f[R] is a tool for deconvolution of wide field
microscopy stacks.
.SH SYNOPSIS
.PP
For deconvolution:
.PP
\f[B]dw\f[R] [\f[I]OPTIONS\f[R]] file.tif psf.tif
.PP
or, for max projections over z:
.PP
\f[B]dw\f[R] maxproj file1.tif file1.tif \&...
.SH OPTIONS
.TP
\f[B]--threads t\f[R]
Set the number of computational threads to use.
.TP
\f[B]--out file.tif\f[R]
Explicitly set the name of the output file.
By default the output file name is the name of the input file prefixed
by \f[C]dw_\f[R].
.TP
\f[B]--prefix str\f[R]
Set the prefix to use for the output file.
An extra \f[C]_\f[R] will be appended to the str.
.TP
\f[B]--iterdump\f[R]
Save each iteration to disk, not only the final.
.TP
\f[B]--niterdump n\f[R]
Save every nth iteration to disk, including the final image.
.TP
\f[B]--iter n\f[R]
Set the number of fixed iterations.
.TP
\f[B]--relerror r\f[R]
Tell \f[B]dw\f[R] to stop when the relative error between to iterations
is below \f[B]r\f[R].
This can be combined with \f[B]--maxiter\f[R] to set a limit on the
number of iterations to perform.
.TP
\f[B]--abserror e\f[R]
Tell \f[B]dw\f[R] to stop when an absolute error is reached.
This can be combined with \f[B]--maxiter\f[R] to set a limit on the
number of iterations to perform.
.TP
\f[B]--maxiter m\f[R]
If a relative or abolute error is used as stopping criteria, this limits
the number of iterations to perform.
.TP
\f[B]--tilesize s\f[R]
Set the size (axial side length, in pixels) of the largest portion that
can be deconvolved at a time.
E.g., if s is 2048 any image larger than 2048 will be deconvolved in
tiles.
.TP
\f[B]--tilepad p\f[R]
Set how many pixels the tiles should overlap.
.TP
\f[B]--overwrite\f[R]
Overwrite the target if it exists.
.TP
\f[B]--bq n\f[R]
Border/edge handling.
n=0: no padding.
n=1: a compromise between memory/speed and quality.
n=2 default.
.TP
\f[B]--float\f[R]
Save the output using 32-bit floats, also turns off any scaling.
Please note that without this flag, images will be saved as 16-bit
unsigned integers and will be scaled to make most use of that format,
see the log files for scaling factor used.
.TP
\f[B]--version\f[R], \f[B]-V\f[R]
Show version information and quit.
.TP
\f[B]--help\f[R]
Show a short help message and quit.
.TP
\f[B]--method METHOD\f[R]
Select what method to use.
Valid options are i/ \f[B]id\f[R] identity transform, i.e.\ nothing.
Useful to see if images loads, scales and saves correctly.
ii/ \f[B]rl\f[R] classical Richardson-Lucy.
iii/ \f[B]ave\f[R] Additive Vector Extrapolation by Biggs and Andrews.
iv/ \f[B]eve\f[R] Exponential Vector Extrapolation by Biggs.
v/ \f[B]shb\f[R] Scaled Heavy Ball.
.TP
\f[B]--mse\f[R]
Show the Mean Square Error between the input image and the current guess
convolved with the PSF at each iteration.
If not set, I-divergence is shown.
.TP
\f[B]--psigma s\f[R]
Pre-process the image and the PSF by convolving it by a 3-D isotropic
Gaussian with sigma=s.
This acts as a low pass filter.
Have been found useful for very noisy image.
.TP
\f[B]maxproj\f[R]
With \f[I]maxproj\f[R] as the first argument deconwolf will create max
projections of all following tif files.
Output will be prefixed with \f[C]max_\f[R].
.SH While running
.PP
At normal verbosity deconwolf will put one green dot per FFT.
After each iteration the Idiv or MSE (with \f[B]--mse\f[R]) is shown,
not that this is not a measurement on the final image quality.
Warnings are prefixed with \[cq] ! \[cq].
More information can be found in the log file.
.SH INPUT
.PP
\f[B]dw\f[R] reads 16-bit (unsigned integers) or 32-bit (floating point)
tif files.
It does not understand compressed files or any dimensions except x,y,z,
so only one color per image etc.
To test if \f[B]dw\f[R] reads and writes your files, try the
\f[B]--method id\f[R] option.
In general, if an image is saved by ImageJ dw should be able to read it.
.SH OUTPUT
.PP
Without specifying the output file name, the output file will be
prefixed with \f[C]dw_\f[R], e.g, if you deconvolve \f[C]file.tif\f[R]
the output file will be called \f[C]dw_file.tif\f[R].
Please pay attention to the log file that also will be created (as
\f[C]dw_file.tif.log.txt\f[R]).
.PP
Unless \f[B]--float\f[R] was specified the output images will be scaled
to use the full dynamic range of the 16 bit format.
The scaling factor can be found in the log file.
.SH PERFORMANCE
.PP
Without specifying any arguments to \f[B]dw\f[R] it will use one thread
per cpu core in the host machine.
This is typically the fastest way to deconvolve one image.
For maximal throughput it is better to run several copies of
\f[B]dw\f[R] using fewer cores each.
E.g.
on an 8-core machine the maximal throughput can be reached by
deconvolving eight images in parallel using one core each (if enough RAM
is available).
.SH SEE ALSO
.PP
\f[B]dw_bw\f[R] for generation of point spread functions according to
the Born-Wolf model.
.SH WEB PAGE
.PP
<https://github.com/elgw/deconwolf/>
.SH REPORTING BUGS
.PP
Please report bugs at <https://github.com/elgw/deconwolf/issues/>
.SH COPYRIGHT
.PP
Copyright \[co] 2022 Erik Wernersson.
License GPLv3+: GNU GPL version 3 or later
<https://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.SH AUTHORS
Erik Wernersson.
